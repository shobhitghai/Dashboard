/*! Fashion_Dashboard 1.0.0 2015-07-12 */
function getDeviceState(){var a=window.getComputedStyle(document.querySelector(".state-indicator"),":before").getPropertyValue("content");return a=a.replace(/"/g,""),a=a.replace(/'/g,"")}function getStoreListData(a){function b(b){var b=$.parseJSON(b),c=d.find(".dropdown-menu"),e=d.find(".store-selected .selected-value");$.each(b,function(a,b){var d="10000"+(a+1);c.append("<li><a data-id="+d+' href="javascript:void(0)">'+this.name+"</span></a></li>")}),window.storeDetail.name="100001",e.text(b[0].name),c.find("li a").on("click",function(a){a.preventDefault,e.text($(this).text()),window.storeDetail.name=$(this).data("id"),$.each(app,function(a,b){app[a].refreshData&&app[a].refreshData()})}),a()}function c(a){console.log("navbar"+a||"err")}var d=$(".mod-navbar").find(".store-dropdown");window.storeDetail={name:""},$.ajax({url:hostUrl+"getStoreDetails",success:function(a){b(a)},error:function(a){c(a)}})}(function(){this.app={}}).call(this),function(){app.config={hello:"world"}}(app);var indicator=document.createElement("div");indicator.className="state-indicator",document.body.appendChild(indicator),window.hostUrl="http://"+window.location.hostname+":3000/api/",function(){window.console||(window.console={});for(var a=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"],b=function(){},c=0;c<a.length;c++)window.console[a[c]]||(window.console[a[c]]=b)}(),Array.prototype.getUnique=function(){for(var a={},b=[],c=0,d=this.length;d>c;++c)a.hasOwnProperty(this[c])||(b.push(this[c]),a[this[c]]=1);return b},$(function(){getStoreListData(app.util.initModules)}),function(){app.util={initModules:function(a){var b=[],c=[],d='[class^="mod-"], [class*=" mod-"]';targets=$(d,a),a=$(a),0===a.length&&(a=$(document)),a.each(function(){$(this).filter(d).length&&(targets=targets.add($(this)))}),targets.each(function(){var a=$(this).prop("class").match(/mod-([^ ]+)/g);$.each(a,function(c){var d=a[c].replace("mod-","");app[d]&&b.push(d)})}),$.each(b,function(a,b){-1===$.inArray(b,c)&&c.push(b)}),b=c;var e=[];return $.each(b,function(c){app[b[c]].init?app[b[c]].settings.defer?e.push(b[c]):app[b[c]].init(a):console.log("initModule: The module '"+b[c]+"' does not have an init method")}),$.each(e,function(b){app[e[b]].init?app[e[b]].init(a):console.log("initModule: The module '"+e[b]+"' does not have an init method")}),b}}}(app),function(){app["ajax-wrapper"]={sendAjax:function(a,b,c,d,e){e&&NProgress.start(!0),$.ajax({url:hostUrl+a,data:b||{},cache:!0,success:function(a){c(a),e&&NProgress.done(!0)},error:function(a){d(a)}})}}}(app),function(){app["filter-panel"]={settings:{target:".mod-filter-panel"},init:function(a){this.settings;app["filter-panel"].fetchData()},fetchData:function(a,b){function c(a){var a=$.parseJSON(a);app["filter-panel"].renderList(a,""),app["filter-panel"].filterListSelection(a)}function d(a){console.log(a)}$.ajax({url:hostUrl+"getStoreDetails",success:function(a){c(a)},error:function(a){d(a)}})},renderList:function(a,b){var c=this.settings,d=$(c.target).find("#city-dd"),e=$(c.target).find("#name-dd"),f=$(c.target).find("#brand-dd"),g=new Array,h=new Array,i=new Array;$.each(a,function(a,b){g.push(this.city),h.push(this.name),i.push(this.brand_name)}),g=g.getUnique(),h=h.getUnique(),i=i.getUnique(),"city"!=b&&app["filter-panel"].appendList(g,d,"city"),"name"!=b&&app["filter-panel"].appendList(h,e,"name"),"brand_name"!=b&&app["filter-panel"].appendList(i,f,"brand_name")},appendList:function(a,b,c){$.each(a,function(a,c){b.append("<option>"+c+"</option>")}),b.listbox({searchbar:!0,listType:c})},filterListSelection:function(a){var b=new Array;$(".lbjs-item").on("click",function(){var c=this;$(c).attr("selected")?($(c).attr("data-selected",!0),$(c).attr("data-disabled",!1)):$(c).attr("data-selected",!1);var d=$(c).attr("data-list-Type"),e=$(c).text();$.each(a,function(a,f){this[d]===e&&($(c).attr("selected")?b.push(this):b.pop(this))}),console.log(b,d),app["filter-panel"].enableDisableListSelection(b,d)})},enableDisableListSelection:function(a,b){function c(b){$.each($(".lbjs-item[data-list-type ="+b+"]"),function(c,d){var e=this;$(e).attr("data-disabled",!0),$.each(a,function(a,c){$(e).text()===this[b]&&($(e).attr("data-disabled",!1),$(e).attr("data-selected",!0))})})}"city"==b&&(c("name"),c("brand_name")),"name"==b&&(c("city"),c("brand_name")),"brand_name"==b&&(c("city"),c("name"))}}}(app),function(){app["tile-section"]={settings:{target:".mod-tile-section",metric:{comparison:"Consecutive",period:"Day"},c:0},init:function(a){this.tile_template=App.Template["tile-opportunity"],this.tile_repeat_cust=App.Template["tile-repeat-cust"];var b=this.settings;b.metric.storeName=window.storeDetail.name,app["tile-section"]._fetchData("getTilesData",b.metric,!0),$(b.target).find(".btn-metric").off().on("click",function(){"Like"==$(this).attr("data-metric-comparison")?($(b.target).find('.grp-timeline .btn-metric[data-metric-period != "Day"]').removeClass("active").addClass("disabled"),$(b.target).find('.grp-timeline .btn-metric[data-metric-period="Day"]').addClass("active")):"Consecutive"==$(this).attr("data-metric-comparison")&&$(b.target).find('.grp-timeline .btn-metric[data-metric-period != "Day"]').removeClass("disabled"),$(this).hasClass("active")||($(this).attr("data-metric-comparison")?b.metric={comparison:$(this).data("metric-comparison").trim(),period:$(".grp-timeline .active").data("metric-period").trim(),storeName:window.storeDetail.name}:b.metric={comparison:$(".grp-comparison .active").data("metric-comparison").trim(),period:$(this).data("metric-period").trim(),storeName:window.storeDetail.name},app["tile-section"]._fetchData("getTilesData",b.metric,!0))}),this.ajaxInterval=setInterval(function(){b.metric.storeName=window.storeDetail.name,app["tile-section"]._fetchData("getTilesData",b.metric)},5e3)},refreshData:function(){var a=this;clearInterval(a.ajaxInterval),app["tile-section"].init()},_fetchData:function(a,b,c){function d(a){a.Error?clearInterval(f.ajaxInterval):app["tile-section"]._bindTemplate(a,b)}function e(a){clearInterval(f.ajaxInterval)}var f=this;this.settings;app["ajax-wrapper"].sendAjax(a,b,d,e,c)},_bindTemplate:function(a,b){var c=$.parseJSON(a),d=c.opportunityData,e=c.storefrontData,f=c.dwellTimeData,g=c.repeatCustomer;$(".section-opportunity").html(this.tile_template({"tile-name":"Outside Opportunity","tile-percent":d.current||"NA","tile-percent-change":(d.comparison?app["tile-section"]._formatComparisonPercent(d.comparison.toFixed(1)):"NA")+"%","tile-period-param":"vs last "+app["tile-section"]._formatPeriodParam(b)})),$(".section-storeFront").html(this.tile_template({"tile-name":"Storefront Conversion","tile-percent":(e.current?e.current.toFixed(1):"NA")+"%","tile-percent-change":(e.comparison?app["tile-section"]._formatComparisonPercent(e.comparison.toFixed(1)):"NA")+"%","tile-period-param":"vs last "+app["tile-section"]._formatPeriodParam(b)})),$(".section-dwellTime").html(this.tile_template({"tile-name":"Dwell Time (mm:ss)","tile-percent":f.current?app["tile-section"]._formatDwellTime(f.current.toFixed(0)):"NA","tile-percent-change":(f.comparison?app["tile-section"]._formatComparisonPercent(f.comparison.toFixed(1)):"NA")+"%","tile-period-param":"vs last "+app["tile-section"]._formatPeriodParam(b)})),$(".section-customers").html(this.tile_repeat_cust({"tile-name":"Repeat Customers","tile-percent":g.current?g.current.toFixed(1)+"%":"NA","tile-percent-change":(g.comparison?app["tile-section"]._formatComparisonPercent(g.comparison.toFixed(1)):"NA")+"%","tile-period-param":"vs last "+app["tile-section"]._formatPeriodParam(b)}))},_formatPeriodParam:function(a){return"Like"==a.comparison?Date().split(" ")[0]:a.period},_formatComparisonPercent:function(a){return-1==a.indexOf("-")&&(a="+"+a),a},_formatDwellTime:function(a){var b=parseInt(a/60)%60,c=parseInt(a)%60;return(10>b?"0"+b:b)+":"+(10>c?"0"+c:c)}}}(app),function(){app["shopper-engagement"]={settings:{target:".mod-shopper-engagement"},init:function(a){var b=this.settings,c=$(b.target).find("#shopper-engagement-chart");app["shopper-engagement"].fetchData("getShopperEngagement",c)},refreshData:function(){app["shopper-engagement"].init()},fetchData:function(a,b){function c(a){var a=$.parseJSON(a),c={};c.currentData=app["shopper-engagement"].reformatData(a.currentMonthArray),c.pastData=app["shopper-engagement"].reformatData(a.lastMonthMArray),app["shopper-engagement"].renderChart(b,c)}function d(a){console.log("navbar"+a||"err")}app["ajax-wrapper"].sendAjax(a,{storeName:window.storeDetail.name},c,d)},reformatData:function(a){var b=a[0]+a[1]+a[2]+a[3],c=[];return $.each(a,function(a,d){c.push(Math.round(d/b*100))}),c},renderChart:function(a,b){a.highcharts({chart:{type:"bar",style:{fontFamily:"Arial"},height:400},colors:["#a6a6a6","#55c6f2"],title:{text:""},xAxis:{categories:[">10 mins","5-20 mins","2-5 mins","bounced"],title:{text:null}},yAxis:{min:0,title:{text:""},lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",gridLineColor:"transparent",labels:{enabled:!1}},tooltip:{valueSuffix:" %"},plotOptions:{bar:{dataLabels:{enabled:!0,format:"{y}%"}}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",margin:30},credits:{enabled:!1},series:[{name:"Last Month",data:b.pastData},{name:"This Month",data:b.currentData}]})}}}(app),function(){app["shopper-profile"]={settings:{target:".mod-shopper-profile"},init:function(a){var b=this.settings,c=$(b.target).find("#shopper-profile-chart");app["shopper-profile"].fetchData("getShopperProfile",c)},refreshData:function(){app["shopper-profile"].init()},fetchData:function(a,b){function c(a){var a=$.parseJSON(a),c=new Array,d=["Others",0];$.each(a,function(b,e){if(5>b){var f=new Array;f.push(this.s_profile),f.push(Math.round(this["count(distinct(tv.mac_address))"])),c.push(f)}else d[1]=d[1]+Math.round(this["count(distinct(tv.mac_address))"]),b==a.length-1&&c.push(d)}),app["shopper-profile"].renderChart(b,c)}function d(a){console.log("navbar"+a||"err")}app["ajax-wrapper"].sendAjax(a,{storeName:window.storeDetail.name},c,d)},renderChart:function(a,b){a.highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,style:{fontFamily:"Arial"}},colors:["#55c6f2","#a9d18e","#f7d348","#c9c9c9","#b4c7e7","#767171"],title:{text:""},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0},series:{dataLabels:{enabled:!0,formatter:function(){return Math.round(this.percentage)+"%"},distance:-30,color:"white"}}},legend:{itemMarginBottom:10},series:[{type:"pie",data:b}],credits:{enabled:!1}})}}}(app),function(){app["revisit-frequency"]={settings:{target:".mod-revisit-frequency"},init:function(a){var b=this.settings,c=$(b.target).find("#revisit-frequency-chart");app["revisit-frequency"].fetchData("getRevisitFrequency",c)},refreshData:function(){app["revisit-frequency"].init()},fetchData:function(a,b){function c(a){var a=$.parseJSON(a),c=new Array;$.each(a,function(a,b){var d=new Array;d.push(this.category),d.push(this["COUNT(mac_address)"]),c.push(d)}),app["revisit-frequency"].renderChart(b,c)}function d(a){console.log("navbar"+a||"err")}app["ajax-wrapper"].sendAjax(a,{storeName:window.storeDetail.name},c,d)},renderChart:function(a,b){a.highcharts({chart:{type:"pie",style:{fontFamily:"Arial"}},colors:["#b4c7e7","#0070c0","#a9d18e","#55c6f2","#f7d348","#767171"],title:{text:""},yAxis:{title:{text:"Total percent market share"}},plotOptions:{pie:{shadow:!1},series:{dataLabels:{enabled:!0,formatter:function(){return"test"},distance:-30,color:"white"}}},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+this.y}},legend:{enabled:!0,layout:"vertical",align:"right",width:200,verticalAlign:"middle",useHTML:!0,itemMarginTop:10,itemMarginBottom:10,labelFormatter:function(){return'<div style="text-align: left; width:50px;float:right;">'+this.name+"</div>"}},series:[{name:"Revisit Freq.",data:b,size:"100%",innerSize:"60%",showInLegend:!0,dataLabels:{enabled:!1}}],credits:{enabled:!1}})}}}(app),function(){app["cross-store"]={settings:{target:".mod-cross-store"},init:function(a){var b=this.settings,c=$(b.target).find("#cross-store-chart");app["cross-store"].fetchData("getCrossVisitData",c)},refreshData:function(){app["cross-store"].init()},fetchData:function(a,b){function c(a){var a=$.parseJSON(a);a=a.crossVisit;var c=[{y:0,color:"#a9d18e"},{y:0,color:"#55c6f2"}];$.each(a,function(a,b){"store"==a?c[0].y=parseFloat(b):c[1].y=parseFloat(b)}),app["cross-store"].renderChart(b,c)}function d(a){console.log("navbar"+a||"err")}app["ajax-wrapper"].sendAjax(a,{storeName:window.storeDetail.name},c,d)},renderChart:function(a,b){a.highcharts({chart:{type:"column",style:{fontFamily:"Arial"}},title:{text:""},xAxis:{categories:["Store","Brand Average"],crosshair:!0},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="padding:0"><b>{point.y:.1f}%</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"Cross-store",data:b}],credits:{enabled:!1}})}}}(app),function(){app["time-trend"]={settings:{target:".mod-time-trend"},init:function(a){var b=this.settings,c=$(b.target).find("#time-trend-chart");app["time-trend"].renderChart(c)},refreshData:function(){app["time-trend"].init()},renderChart:function(a){a.highcharts({title:{text:"",style:{fontFamily:"Arial"}},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yAxis:{title:{text:"Walk-ins"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"Tokyo",data:[7,6.9,9.5,14.5,22,11,21.2,26.5,23.3,18.3,13.9,9.6]},{name:"New York",data:[-.2,.8,8,21,17,20,8,11.1,29.1,14.1,8.6,2.5]}],credits:{enabled:!1}})}}}(app),function(){app["right-now"]={settings:{target:".mod-right-now"},init:function(a){var b=this.settings,c=$(b.target).find("#shoppers-mall-chart"),d=$(b.target).find("#shoppers-store-chart");app["right-now"].fetchData("getRightNowData"),this.refreshInterval=setInterval(function(){app["right-now"].fetchData("getRightNowData")},5e3);var e=[{name:"Discount Sensitive",data:[5]},{name:"Utility Buyer",data:[2]},{name:"Fashion",data:[3]}],f=[{name:"Discount Sensitive",data:[2]},{name:"Utility Buyer",data:[5]},{name:"Fashion",data:[3]}];app["right-now"].renderChart(c,e),app["right-now"].renderChart(d,f)},refreshData:function(){var a=this;clearInterval(a.refreshInterval),app["right-now"].init()},fetchData:function(a){function b(a){if(a.Error)clearInterval(d.refreshInterval);else{var a=$.parseJSON(a),b={};a.length&&(b.peopleMall=a[0].cnt+a[1].cnt,b.peopleStore=a[1].cnt,$(d.settings.target).find(".people-mall-count").text(b.peopleMall),$(d.settings.target).find(".people-store-count").text(b.peopleStore))}}function c(a){console.log("right-now"+a||"err")}var d=this;app["ajax-wrapper"].sendAjax(a,{storeName:window.storeDetail.name},b,c)},renderChart:function(a,b){a.highcharts({chart:{type:"bar",height:100},colors:["#f7d348","#55c6f2","#a9d18e"],title:{text:""},xAxis:{lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",labels:{enabled:!1},minorTickLength:0,tickLength:0},yAxis:{lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",gridLineColor:"transparent",labels:{enabled:!1},title:{text:""},minorTickLength:0,tickLength:0},legend:{reversed:!0,enabled:!1},plotOptions:{series:{stacking:"normal",pointWidth:50}},series:b,credits:{enabled:!1}})}}}(app),function(){app["internal-benchmarking"]={settings:{target:".mod-internal-benchmarking"},init:function(a){var b=this.settings;$(".benchmark-start-date").datepicker({}),$(".benchmark-end-date").datepicker({});var c=$(b.target).find("#walkins-chart");storeFront_chart=$(b.target).find("#storeFront-chart"),engagement_chart=$(b.target).find("#engagement-chart"),dwell_chart=$(b.target).find("#dwell-chart"),repeatCustomers_chart=$(b.target).find("#repeatCustomers-chart"),topCustomers_chart=$(b.target).find("#topCustomers-chart"),categoriesArr=["Your Store","This Mall/Area","Stores(same city tier)","Stores(All)"];var d={labelName:"Walk-ins",chartbaseMargin:20,containerName:c,dataArr:[{name:"Last Month",data:[107,31,635,203]}],colors:["#00b0f0"]},e={labelName:"Storefront conversion",chartbaseMargin:5,containerName:storeFront_chart,dataArr:[{name:"Last Month",data:[17,341,211,343]}],colors:["#f7d348"]},f={labelName:"Engagement levels",chartbaseMargin:5,containerName:engagement_chart,dataArr:[{name:"Last Month",data:[99,77,665,63]}],colors:["#92d050"]},g={labelName:"Dwell time",chartbaseMargin:20,containerName:dwell_chart,dataArr:[{name:"Last Month",data:[107,31,635,203]}],colors:["#0070c0"]},h={labelName:"Repeat customers",chartbaseMargin:5,containerName:repeatCustomers_chart,dataArr:[{name:"Last Month",data:[107,31,635,203]}],colors:["#ff6d60"]},i={labelName:"Top customers",chartbaseMargin:5,containerName:topCustomers_chart,dataArr:[{name:"Last Month",data:[107,31,635,203]}],colors:["#7030a0"]};app["internal-benchmarking"].renderChart(d),categoriesArr,app["internal-benchmarking"].renderChart(e,categoriesArr),app["internal-benchmarking"].renderChart(f,categoriesArr),app["internal-benchmarking"].renderChart(g,categoriesArr),app["internal-benchmarking"].renderChart(h,categoriesArr),app["internal-benchmarking"].renderChart(i,categoriesArr)},refreshData:function(){app["internal-benchmarking"].init()},renderChart:function(a){var b=a.containerName;b.highcharts({chart:{type:"bar",style:{fontFamily:"Arial",fontSize:"12px"}},colors:a.colors,title:{text:a.labelName,align:"left",x:0,y:10,margin:a.chartbaseMargin},xAxis:{categories:categoriesArr,lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",labels:{enabled:!1},minorTickLength:0,tickLength:0},yAxis:{lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",gridLineColor:"transparent",labels:{enabled:!1},title:{text:""},minorTickLength:0,tickLength:0},tooltip:{valueSuffix:" millions"},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{enabled:!1},credits:{enabled:!1},series:a.dataArr})}}}(app),function(){app["campaign-impact"]={settings:{target:".mod-campaign-impact"},init:function(a){var b=this.settings,c=$(b.target),d=c.find(".edit-btn"),e=c.find(".impact-edit"),f=c.find(".campaign-start-date input"),g=c.find(".campaign-end-date input"),h={};e.addClass("edit-active"),$(".campaign-start-date").datepicker({format:"yyyy-mm-dd"}),$(".campaign-end-date").datepicker({format:"yyyy-mm-dd"}),$(b.target).find(".config-save").off("click").on("click",function(){f.val()&&g.val()&&(h.sDate="'"+f.val()+"'",h.eDate="'"+g.val()+"'",h.storeName=window.storeDetail.name,app["campaign-impact"].fetchData("getCampaignImpact",h),e.toggleClass("edit-active"))}),d.off("click").on("click",function(){e.toggleClass("edit-active")}),$(b.target).find(".config-cancel").off("click").on("click",function(){e.toggleClass("edit-active")})},refreshData:function(){app["campaign-impact"].init()},saveForm:function(){},fetchData:function(a,b){function c(a){var b=$.parseJSON(a),c=b.campaignData.cnt/b.campaignData.DiffDate,d=b.lastMonthData.cnt/b.lastMonthData.DiffDate,f=Math.round((c-d)/d*100),g=b.campaignData.dwt,h=b.lastMonthData.dwt,i=Math.round((g-h)/h*100);$("#campaign-walkin span").text(e.formatConversionData(f)+"%"),$("#campaign-dwt span").text(e.formatConversionData(i)+"%"),e.formatImpactChangeColor()}function d(a){console.log(a||"err")}var e=this;app["ajax-wrapper"].sendAjax(a,b,c,d)},formatConversionData:function(a){return parseInt(a)>=0?"+"+a:a||"NA"},formatImpactChangeColor:function(){var a=$(".mod-campaign-impact .impact-change");$.each(a,function(a,b){parseFloat($(this).find("span").text())>=0?$(this).addClass("impact-pos"):$(this).addClass("impact-neg")})}}}(app),function(){app["modification-impact"]={settings:{target:".mod-modification-impact"},init:function(a){var b=this.settings,c=$(b.target),d=c.find(".edit-btn"),e=c.find(".impact-edit"),f=c.find(".storefront-start-date input"),g={};e.addClass("edit-active"),$(b.target).find(".config-save").off("click").on("click",function(){f.val()&&(g.sDate="'"+f.val()+"'",g.storeName=window.storeDetail.name,app["modification-impact"].fetchData("getStoreFrontChange",g),e.toggleClass("edit-active"))}),d.off("click").on("click",function(){e.toggleClass("edit-active")}),$(".storefront-start-date").datepicker({format:"yyyy-mm-dd"})},refreshData:function(){app["modification-impact"].init()},fetchData:function(a,b){function c(a){var b=$.parseJSON(a);console.log(b),$("#sf-conversion-change span").text(e.formatConversionData(b.conversionChange)+"%"),$("#sf-walk-in span").text(e.formatConversionData(b.walkIn)+"%"),$("#sf-dwell-time span").text(e.formatConversionData(b.dwellTime)+"%"),e.formatImpactChangeColor()}function d(a){console.log(a||"err")}var e=this;app["ajax-wrapper"].sendAjax(a,b,c,d)},formatConversionData:function(a){return parseFloat(a)>=0?"+"+a:a||"NA"},formatImpactChangeColor:function(){var a=$(".mod-modification-impact .impact-change");$.each(a,function(a,b){parseFloat($(this).find("span").text())>=0?$(this).addClass("impact-pos"):$(this).addClass("impact-neg")})}}}(app),function(){app["hour-optimization"]={settings:{target:".mod-hour-optimization"},init:function(a){var b=this.settings,c=$(b.target).find("#hour-optimization-chart");app["hour-optimization"].fetchData("getHourOptimizationData",c)},refreshData:function(){app["hour-optimization"].init()},fetchData:function(a,b){function c(a){var a=$.parseJSON(a),c=new Array;$.each(a,function(a,b){c.push(Math.round(this.avg_walk_by))}),app["hour-optimization"].renderChart(b,c)}function d(a){console.log("navbar"+a||"err")}app["ajax-wrapper"].sendAjax(a,{storeName:window.storeDetail.name},c,d)},renderChart:function(a,b){a.highcharts({chart:{type:"column",style:{fontFamily:"Arial"}},title:{text:""},xAxis:{categories:["8.30 a.m","9.30 a.m","10.30 a.m","11.30 a.m","12.30 p.m","1.30 p.m","2.30 p.m","3.30 p.m","4.30 p.m","5.30 p.m","6.30 p.m","7.30 p.m","8.30 p.m","9.30 p.m","10.30 p.m"],crosshair:!0,title:{text:null}},yAxis:{title:{text:null},lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",gridLineColor:"transparent"},tooltip:{enabled:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0,dataLabels:{enabled:!0,format:"{y}"}}},series:[{name:"Outside opportunity",data:b}],credits:{enabled:!1}})}}}(app);